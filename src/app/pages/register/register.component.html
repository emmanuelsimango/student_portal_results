<div class=" row">
	<div class=" col-lg-12 ">
		<div class="card">
			<div class="card-body small">
				<h6 class="mb-3">
					Registration Details
				</h6>
				<table class="table table-full-width   " *ngIf="regTemplate">
					<tr>
						<td class="py-1">
							Last Active Period:
						</td>
						<td class="pl-3 py-1">
							{{ auth.is_Authenticated().registration.period.period_name }}
						</td>
					</tr>
					<tr>
						<td class="py-1">
							Last Registration Level:
						</td>
						<td class="pl-3 py-1">
							{{ auth.is_Authenticated().registration.program.level }}
						</td>
					</tr>
					<tr class="text-primary border-top"
						*ngIf="regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name">
						<td class="py-1">
							Current Active Period:
						</td>
						<td class="pl-3 py-1">
							{{ regTemplate.body.nextPeriod.period_name }}
						</td>
					</tr>
					<tr class="text-primary"
						*ngIf="regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name">
						<td class="py-1">
							Current Registration Level:
						</td>
						<td class="pl-3 py-1">
							{{ regTemplate.body.nextLevel.academic_level }}-{{ regTemplate.body.nextLevel.semester }}
						</td>
					</tr>
					<tr class="border-top"
						*ngIf="regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name">
						<td class="py-1">
							Required Balance:
						</td>
						<td class="pl-3 py-1" *ngIf="regTemplate">
							{{ regTemplate.body.fees |currency }}
						</td>
					</tr>
					<tr class="">
						<td class="py-1">
							Current Balance:
						</td>
						<td class="pl-3 py-1">
							{{ balance | currency}}
						</td>
					</tr>

					<tr class="" *ngIf="!regTemplate.body.nextPeriod || !regTemplate.body.nextPeriod.period_name ">
						<td class="py-1 text-danger font-weight-bold" colspan="2">
							You are not allowed to register online please visit the registration Office
						</td>
						<!-- <td class="pl-3 py-1">
							{{ balance | currency}}
						</td> -->
					</tr>
					<tr class="" *ngIf="regTemplate && (regTemplate.body.fees<balance)  ">
						<td class="py-1 text-danger font-weight-bold" colspan="2">
							You are not allowed to register online, please update your fees payment
						</td>

					</tr>
				</table>



			</div>

			<!-- <div class="card-body" *ngIf="regTemplate && (regTemplate.body.fees>=balance) && (regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name) && (regModuleTemplate.length==1)" >
				<h6>
					Modules
				</h6>
				<table class="table " >
					<thead class="thead-light">
						<tr class="small">
							<th>#</th>
							<th>
								Module Code
							</th>
							<th>
								Module Name
							</th>
						</tr>
					</thead>
					<tbody>
						<tr  class="small" *ngFor="let item of regTemplate.body.module;let i = index" >
							<td>{{ i+1 }}</td>
							<td>
								{{ item.module_code }}{{ item.module_unit_code }}
							</td>
							<td>
								{{ item.module_name }}
							</td>
						</tr>
					</tbody>
				</table>
				<div class="form-group d-flex flex-row justify-content-end mt-3 ">
					<button (click)="confirmRegistration(alert)"  class="btn btn-primary " >
						Register Now
					</button>

				</div>

			</div> -->
		</div>
	</div>
	<div class="col-12" *ngIf="regTemplate && regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name && (regModuleTemplate.length>1) &&  (regTemplate.body.fees>=balance || regTemplate.body.is_exempted) ">
		<div class="alert alert-warning small text-center" role="alert">

				<p class="text-white h5 pb-0 mb-0">Registration  for level {{ regTemplate.body.nextLevel.academic_level }}-{{ regTemplate.body.nextLevel.semester }} has the following options, Kindly choose your preference</p>

		</div>
	</div>

	<div class="col-12" *ngIf="regTemplate.body.module.length < 1 ">
		<div class="alert alert-warning small text-center" role="alert">

				<p class="text-white h5 pb-0 mb-0">Modules not ready, please contact system admin!!</p>

		</div>
	</div>

	<div class="  mx-auto" [ngClass]="regModuleTemplate.length>1?'col-lg-6':'col-lg-12'"  *ngFor="let template of regModuleTemplate;let i = index">
		<div class="card h-100"  *ngIf="regModuleTemplate && (regTemplate.body.fees>=balance || regTemplate.body.is_exempted ) && (regTemplate.body.nextPeriod && regTemplate.body.nextPeriod.period_name) ">
			<div class="card-body pb-0 mb-0">
				<h6 *ngIf="regModuleTemplate.length>1;else default" >
					Option {{ i+1 }} : {{ template[1][0].registration_choice_name }}
				</h6>
				<ng-template #default>
					<h6>
						Modules
					</h6>
				</ng-template>
				<table class="table pb-0 mb-0">
					<thead class="thead-light">
						<tr class="small">
							<th>#</th>
							<th>
								Module Code
							</th>
							<th>
								Module Name
							</th>
						</tr>
					</thead>
					<tbody>
						<tr class="small pb-0" *ngFor="let item of template[1];let i = index">
							<td>{{ i+1 }}</td>
							<td>
								{{ item.module_code }}{{ item.module_unit_code }}
							</td>
							<td>
								{{ item.module_name }}
							</td>
						</tr>
					</tbody>
				</table>

			</div>
			<div class="card-footer d-flex flex-row justify-content-start p-1">
				<button (click)="confirmRegistration(alert,template)" class="btn btn-primary ">
					Register Now
				</button>

			</div>
		</div>
	</div>
</div>
<ng-template #alert let-modal>

	<a class="btn btn-link float-left text-danger mr-0" (click)="modal.dismiss('Cross click')">
		x
	</a>
	<div class="modal-body text-center">

		<div class="alert alert-warning text-center" role="alert">
			{{ msg }}
		</div>

	</div>

</ng-template>
